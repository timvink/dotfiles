// Place your key bindings in this file to override the defaults
[
    {
        "key": "shift+enter",
        "command": "jupyter.execSelectionInteractive",
        "when": "editorTextFocus && !findInputFocussed && !isCompositeNotebook && !notebookEditorFocused && !replaceInputFocussed && editorLangId == 'python'"
    },
    {
        "key": "shift+enter",
        "command": "-jupyter.execSelectionInteractive",
        "when": "editorTextFocus && isWorkspaceTrusted && jupyter.ownsSelection && !findInputFocussed && !isCompositeNotebook && !notebookEditorFocused && !replaceInputFocussed && editorLangId == 'python'"
    },
    // ESC closes the sidebar 
    // and moves focus back to the active editor group
    {
        "key": "escape",
        "command": "runCommands",
        "args": {
            "commands": [
                "workbench.action.toggleSidebarVisibility",
                "workbench.action.focusActiveEditorGroup"
            ]
        },
        "when": "sideBarFocus && !inputFocus && !editorTextFocus && !inVimMode && !listFindWidgetVisible"
    },
    // ESC to also Close the secondary sidebar (e.g., Copilot chat, Terminal, etc.)
    {
        "key": "escape",
        "command": "workbench.action.closeAuxiliaryBar",
        "when": "auxiliaryBarFocus"
    },
    // ESC also closes the terminal if it's focused
      // And it moves focus back to the editor
    {
      "key": "escape",
      "command": "workbench.action.terminal.toggleTerminal",
      "when": "terminalFocus"
    },
    {
        "key": "escape",
        "command": "workbench.action.terminal.toggleTerminal",
        "when": "terminalFocus"
    },
    // ESC closes the search & replace sidebar
    {
      "key": "escape",
      "command": "workbench.action.closeSidebar",
      "when": "searchViewletFocus"
    },
    // Navigate tabs using Shift+h and Shift+l
    // Works in both notebooks and regular text editors
    {
        "key": "shift+h",
        "command": "workbench.action.previousEditor",
        "when": "notebookEditorFocused && vim.mode != 'Insert'"
    },
    {
        "key": "shift+l", 
        "command": "workbench.action.nextEditor",
        "when": "notebookEditorFocused && vim.mode != 'Insert'"
    },
    {
        "key": "shift+h",
        "command": "workbench.action.previousEditor",
        "when": "editorTextFocus && vim.mode == 'Normal'"
    },
    {
        "key": "shift+l", 
        "command": "workbench.action.nextEditor",
        "when": "editorTextFocus && vim.mode == 'Normal'"
    },
    // Open file tree when all tabs are closed
    // {
    //   "key": "e",
    //   "command": "workbench.explorer.fileView.focus",
    //   "when": "!editorTextFocus && !explorerViewletVisible && !sideBarFocus && !terminalFocus && !auxiliaryBarFocus && !inVimMode"
    // },
    // FILE TREE
    // New file, use trailing / in filename to create a new folder
    {
        "key": "a",
        "command": "explorer.newFile",
        "when": "filesExplorerFocus && !inputFocus"
    },
  {
    "command": "deleteFile",
    "key": "d",
    "when": "filesExplorerFocus && !inputFocus"
  },
  {
    "command": "renameFile",
    "key": "r",
    "when": "filesExplorerFocus && !inputFocus"
  },
  {
    "command": "filesExplorer.copy",
    "key": "c",
    "when": "filesExplorerFocus && !inputFocus"
  },
  {
    "command": "filesExplorer.paste", 
    "key": "p",
    "when": "filesExplorerFocus && !inputFocus"
  },
{
    "command": "workbench.action.closeSidebar", 
    "key": "q",
    "when": "filesExplorerFocus && !inputFocus"
  },
  // enter to open file
  {
      "key": "enter",
      "command": "explorer.openAndPassFocus",
      "when": "filesExplorerFocus && !inputFocus"
  },
  // o to quickly preview a file, without moving focus 
  {
  "key": "o",
  "command": "filesExplorer.openFilePreserveFocus",
  "when": "filesExplorerFocus && !inputFocus"
  },
  // Shift + L to move focus back to the navigator
  {
    "key": "shift+l",
    "command": "workbench.view.explorer",
    "when": "filesExplorerFocus && !inputFocus"
  },
  // slash (/) to search files in the explorer
  {
    "key": "/",
    "command": "list.find",
    "when": "filesExplorerFocus && !inputFocus"
  },
  {
    "key": "escape",
    "command": "runCommands",
    "args": {
      "commands": [
        "list.findCancel"
      ]
    },
    "when": "listFindWidgetVisible && listFocus"
  },
  // New keybinding for space t to toggle terminal
  {
      "key": "space t",
      "command": "workbench.action.terminal.toggleTerminal",
      "when": "editorTextFocus"
  }
]
